<div class="page-header">
  <h3 ng-show="input.isEdit">{{'REGISTER_CM_CODE.TITLE'|translate}}</h3>
  <h3 ng-show="!input.isEdit">{{'REGISTER_CM_CODE.TITLE_UPDATE'|translate}}</h3>
</div>
<form id="formAddCmCode" class="form-horizontal" ng-submit="registerCmCode()">
  <div class="control-group">
    <label class="control-label" for="affiliateName">{{'ADVERTISE_COMMON.AFF_NAME'|translate}}</label>
    <div class="controls">
      <select id="affiliateName" ng-if="input.isEdit" ng-model="input.affId" class="span4" ng-change="changeAff()"
          ng-options="a.aff_id as a.aff_name for a in list" required>
      </select>
      <label ng-show="!input.isEdit" class="span4 control-label">
        <span class="pull-left">{{aff_name}}</span>
      </label>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="mediaName">{{'REGISTER_CM_CODE.RCC_MEDIA'|translate}}</label>
    <div class="controls">
      <select id="mediaName" ng-if="input.isEdit" ng-model="input.mediaId" class="span4"
        ng-options="m.media_id as m.media_name for m in mediaList" required>
      </select>
      <label ng-show="!input.isEdit" class="span4 control-label">
        <span class="pull-left">{{media_name}}</span>
      </label>
    </div>
  </div>
  
  <div ng-class="{'control-group': true, 'error': input.showError.cmCode}">
    <label class="control-label" for="cmCode">{{'REGISTER_CM_CODE.RCC_CM_CODE'|translate}}</label>
    <div class="controls">
      <input type="text" id="cmCode" ng-if="input.isEdit" ng-model="input.cmCode"
        class="span2" required pattern="[a-z0-9\-\_\－]+">
      <label ng-show="!input.isEdit" class="span2 control-label">
        <span class="pull-left">{{cm_code}}</span>
      </label>
    </div>
  </div>

  <div ng-class="{'control-group': true, 'error': input.showError.status}">
    <label class="control-label" for="status">{{'FORM.STATUS'|translate}}</label>
    <div class="controls">
      <select ng-model="input.status" id="status" class="span2"
        ng-options="s.value as s.label for s in attributes.status">
      </select>
    </div>
  </div>

  <div ng-class="{'control-group': true, 'error': input.showError.money}">
    <label class="control-label" for="money">{{'REGISTER_CM_CODE.RCC_MONEY'|translate}}</label>
    <div class="controls">
      <input type="number" step="any" min="0" max="1000000" ng-model="input.money" id="money" class="span2" required>
      <span class="help-inline">{{'REGISTER_CM_CODE.RCC_CURRENCY_UNIT'|translate}}</span>
    </div>
  </div>

  <div ng-class="{'control-group': true, 'error': input.showError.type}">
    <label class="control-label">{{'REGISTER_CM_CODE.RCC_TRACK_URL'|translate}}</label>
    <div class="controls">
      <label class="radio" ng-repeat="item in attributes.trackUrl">
        <input type="radio" name="track_url" ng-model="input.type" value="{{item.value}}" required>
        {{item.label}}
      </label>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label"></label>
    <div class="controls">
	  <div ng-class="{'control-group': true, 'error': input.showError.redirect}">
        <label class="control-label" for="redirect">{{'REGISTER_CM_CODE.RCC_REDIRECT_URL'|translate}}</label>
        <div class="controls">
          <input type="text" class="span8" ng-model="input.redirect" id="redirect">
        </div>
      </div>
      <div ng-class="{'control-group': true, 'error': input.showError.registration}">
        <label class="control-label" for="registration">{{'REGISTER_CM_CODE.RCC_REGISTRATION'|translate}}</label>
        <div class="controls">
          <input type="text" class="span8" ng-model="input.registration" id="registration" required>
        </div>
      </div>
      <div ng-class="{'control-group': true, 'error': input.showError.purchase}">
        <label class="control-label" for="purchase">{{'REGISTER_CM_CODE.RCC_PURCHASE'|translate}}</label>
        <div class="controls">
          <input type="text" class="span8" ng-model="input.purchase" id="purchase">
          <br/>
          <span><small class="text-info">{{'REGISTER_CM_CODE.RCC_TEXT_BELOW_PURCHASE'|translate}}</small></span>
        </div>
      </div>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="description">{{'REGISTER_CM_CODE.RCC_DESCRIPTION'|translate}}</label>
    <div class="controls">
      <textarea rows="6" class="span9" ng-model="input.description" id="description"></textarea>
    </div>
  </div>

  <div class="row-fluid margin-top-10px">
    <button ng-show="!input.isUpdate" type="submit" class="offset5 btn btn-primary">{{'REGISTER_CM_CODE.RCC_BUTTON_REGISTER'|translate}}</button>
    <button ng-show="input.isUpdate" type="button" class="offset5 btn btn-primary" ng-click="updateCmCode()">{{'REGISTER_CM_CODE.RCC_BUTTON_UPDATE'|translate}}</button>
  </div>
</form>